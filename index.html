<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duo Map UI - Enhanced Replica</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- General Styles --- */
        :root {
            /* Updated Colors from reference */
            --duo-green: #78c800; /* Brighter green */
            --duo-green-dark: #5ca000;
            --duo-blue: #1899d6; /* Existing blue seems okay */
            --duo-blue-dark: #137cac;
            --duo-yellow: #ffc800;
            --duo-orange: #ff9600;
            --duo-red: #ff4b4b;
            --duo-purple: #894cdc;
            --duo-gray-light: #e5e5e5;
            --duo-gray-medium: #afafaf;
            --duo-gray-dark: #777777;
            --duo-text-dark: #4b4b4b;
            --duo-text-light: #ffffff;
            --duo-bg-light: #ffffff;
            --duo-bg-offwhite: #f7f7f7;
            --duo-border-gray: #d7d7d7; /* Border color */
            --map-bg-green-light: #b7e980;
            --map-bg-green-dark: #a1d867;
            --map-river-blue: #a0dffc;
            --map-road-light: #fdf3d1;
            --map-route-orange: #ff9600; /* Use --duo-orange */

            --font-family: 'Nunito', sans-serif;
            --border-radius-small: 8px;
            --border-radius-medium: 16px;
            --border-radius-large: 24px;
            --box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            --box-shadow-heavy: 0px 4px 10px rgba(0, 0, 0, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
             height: 100%;
             overflow: hidden;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--duo-bg-offwhite); /* Slightly off-white bg */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* --- SVG Icon Styles --- */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            stroke-width: 0;
            stroke: currentColor;
            fill: currentColor;
            vertical-align: middle;
        }

        /* --- Container --- */
        .duo-map-container {
            display: flex;
            width: 1280px; /* Approx width from image */
            height: 720px; /* Approx height from image */
            background-color: var(--duo-bg-light);
            border-radius: var(--border-radius-large);
            box-shadow: var(--box-shadow-heavy);
            overflow: hidden;
        }

        /* --- Left Sidebar --- */
        .sidebar-left {
            background-color: var(--duo-bg-light);
            width: 90px;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-right: 1px solid var(--duo-border-gray);
            gap: 10px; /* Reduced gap */
            flex-shrink: 0;
        }

        .sidebar-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--duo-gray-medium);
            width: 70px;
            position: relative;
            text-align: center;
            padding: 5px 0; /* Add some padding */
            border-radius: var(--border-radius-medium); /* Rounded hover */
            transition: background-color 0.2s ease, color 0.2s ease;
        }
         .sidebar-icon .icon-wrapper { /* Wrapper for icon only */
            height: 40px;
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
         }
         .sidebar-icon .icon {
            font-size: 24px; /* Control SVG size */
            color: var(--duo-gray-medium); /* Default icon color */
         }


        /* City Icons */
        .sidebar-icon.city .icon-wrapper {
            width: 48px; /* Match reference size */
            height: 48px;
            border-radius: var(--border-radius-medium); /* More rounded */
            margin-bottom: 5px;
            overflow: hidden; /* Clip SVG */
            border: 1px solid transparent; /* For active state */
        }
         .sidebar-icon.city .icon {
             width: 100%;
             height: 100%;
             fill: #ccc; /* Default fill for city SVG */
         }

         /* Specific City Icon Overrides (using SVG fill directly now) */
         .sidebar-icon.city.active .icon-wrapper {
             border: 3px solid var(--duo-blue);
         }


        .sidebar-icon span {
            font-size: 12px;
            font-weight: 700;
            color: var(--duo-gray-dark);
        }

        .sidebar-icon:hover {
             background-color: var(--duo-bg-offwhite);
        }
        .sidebar-icon.active,
        .sidebar-icon.active:hover {
            color: var(--duo-blue);
            background-color: transparent; /* No bg color for active city */
        }
         .sidebar-icon.active span {
             color: var(--duo-blue);
         }
         .sidebar-icon.active .icon {
             color: var(--duo-blue); /* Active simple icons blue */
         }


        .sidebar-divider {
            width: 60%;
            height: 1px;
            background-color: var(--duo-border-gray);
            margin: 10px 0;
        }

        .sidebar-icon.more-tours .icon {
            color: var(--duo-blue);
        }
        .sidebar-icon.more-tours span {
             color: var(--duo-blue);
             font-weight: 700;
        }

        .sidebar-icon.character {
            margin-top: auto;
        }
        .sidebar-icon .character-avatar {
             width: 50px;
             height: 50px;
             border: 3px solid var(--duo-yellow);
             border-radius: 50%;
             background-color: #D2B48C; /* Tan placeholder */
             display: flex;
             align-items: center;
             justify-content: center;
             font-weight: bold;
             color: white;
             overflow: hidden;
        }
         .sidebar-icon .character-avatar .icon {
             width: 100%;
             height: 100%;
         }
        .sidebar-icon .char-badge {
            position: absolute;
            bottom: -2px; /* Adjust position */
            right: 5px;
            background-color: var(--duo-orange);
            color: var(--duo-text-light);
            font-size: 11px;
            font-weight: 800;
            padding: 2px 6px;
            border-radius: 10px;
            border: 2px solid var(--duo-text-light);
            line-height: 1;
        }

        /* --- Main Map Area --- */
        .map-area {
            flex-grow: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- Top Bar --- */
        .top-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px; /* Adjusted padding */
            background-color: var(--duo-bg-light); /* Solid white */
            border-bottom: 1px solid var(--duo-border-gray);
            position: relative;
            z-index: 10;
            flex-shrink: 0;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background-color: var(--duo-bg-light); /* White bg */
            padding: 8px 15px;
            border-radius: var(--border-radius-medium); /* More rounded */
            border: 1px solid var(--duo-border-gray);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }

        .search-bar input {
            border: none;
            background: none;
            outline: none;
            margin: 0 10px;
            font-size: 14px;
            font-weight: 700; /* Bold placeholder */
            color: var(--duo-text-dark);
            width: 180px;
        }
        .search-bar input::placeholder {
            color: var(--duo-gray-medium);
             font-weight: 700;
        }

        .search-bar .icon {
            color: var(--duo-gray-medium);
            font-size: 20px;
        }
        .search-bar .icon-directions {
            color: var(--duo-blue);
            cursor: pointer;
        }

        .tour-progress {
            display: flex;
            align-items: center;
            gap: 15px;
             background-color: var(--duo-bg-light);
             padding: 8px 15px;
             border-radius: var(--border-radius-medium);
             border: 1px solid var(--duo-border-gray);
        }

        .flag {
            font-size: 24px; /* Smaller flag */
        }

        .progress-text h2 {
            font-size: 16px; /* Smaller title */
            font-weight: 800;
            color: var(--duo-text-dark);
            margin-bottom: 3px;
        }
        .progress-bar-container {
            width: 120px; /* Shorter bar */
            height: 8px; /* Thinner bar */
            background-color: var(--duo-gray-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 3px;
        }
        .progress-bar {
            /* Assuming 15/20 spots left means 5 visited */
            width: calc(5 / 20 * 100%); /* 25% */
            height: 100%;
            background-color: var(--duo-yellow);
            border-radius: 4px;
        }
        .progress-text span {
            font-size: 12px;
            font-weight: 700;
            color: var(--duo-gray-dark);
            display: flex;
            align-items: center;
        }
        .progress-text span .icon {
            color: var(--duo-yellow);
            margin-right: 5px;
            font-size: 14px;
        }

        /* --- Map Content --- */
        .map-content {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            background-color: var(--map-bg-green-light); /* Base green */
        }

        #map-background-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* --- Landmarks & Markers --- */
        .landmark, .marker {
            position: absolute;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            z-index: 1; /* Above map background */
        }
        .landmark-icon-wrapper, .marker-icon-wrapper {
             /* Adjust size based on specific landmark SVG */
             margin-bottom: 4px; /* Space between icon and label */
             filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2)); /* Add drop shadow */
        }
        .landmark-icon-wrapper svg, .marker-icon-wrapper svg {
            display: block; /* Prevent extra space */
            width: 100%;
            height: auto;
            max-width: 60px; /* Limit max size */
            max-height: 60px;
        }

        .landmark span, .marker span {
            display: block;
            background-color: rgba(0, 0, 0, 0.65); /* Slightly darker label */
            color: white;
            font-size: 11px; /* Slightly larger */
            padding: 3px 6px;
            border-radius: var(--border-radius-small);
            white-space: nowrap;
            font-weight: 700; /* Bold label */
        }


        /* --- Approximate Positions & Sizes (adjust precisely) --- */
        .landmark.arc-de-triomphe { top: 25%; left: 20%; }
        .landmark.arc-de-triomphe .landmark-icon-wrapper { width: 45px; }

        .landmark.place-concorde { top: 15%; left: 55%; }
         .landmark.place-concorde .landmark-icon-wrapper { width: 15px; height: 55px; }
         .landmark.place-concorde span { margin-top: -2px; }

        .landmark.palais-garnier { top: 22%; left: 70%; }
         .landmark.palais-garnier .landmark-icon-wrapper { width: 50px; }

        .landmark.hotel-invalides { top: 40%; left: 50%; }
         .landmark.hotel-invalides .landmark-icon-wrapper { width: 55px; }

        .landmark.pantheon { top: 50%; left: 65%; }
         .landmark.pantheon .landmark-icon-wrapper { width: 50px; }

        .landmark.sainte-chapelle { top: 65%; left: 20%; }
         .landmark.sainte-chapelle .landmark-icon-wrapper { width: 40px; height: 55px; }

        .landmark.notre-dame { top: 80%; left: 30%; }
         .landmark.notre-dame .landmark-icon-wrapper { width: 55px; }

        .landmark.louvre { top: 80%; left: 75%; }
         .landmark.louvre .landmark-icon-wrapper { width: 45px; height: 35px; }


        /* "You are here" marker */
        .marker.you-are-here {
            top: 50%; left: 40%; /* Adjust */
            transform: translate(-50%, -50%);
            z-index: 5;
        }
        .marker.you-are-here .marker-icon-wrapper {
            width: 50px; /* Eiffel tower size */
             filter: drop-shadow(0 3px 3px rgba(0,0,0,0.3));
        }
        .marker.you-are-here span {
            margin-top: 0;
            background-color: var(--duo-blue);
            transform: translateY(-5px); /* Overlap base slightly */
        }
        .marker-popup {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--duo-bg-light);
            color: var(--duo-text-dark);
            padding: 6px 12px;
            border-radius: var(--border-radius-medium); /* More rounded */
            font-size: 13px;
            font-weight: 800; /* Bold */
            white-space: nowrap;
            box-shadow: var(--box-shadow);
            margin-bottom: 18px; /* More Space between popup and icon */
        }
        .marker-popup::before { /* Pin shape using border */
             content: '';
             position: absolute;
             top: calc(100% - 1px); /* Position below bubble */
             left: 50%;
             transform: translateX(-50%);
             width: 0;
             height: 0;
             border-left: 8px solid transparent;
             border-right: 8px solid transparent;
             border-top: 8px solid var(--duo-bg-light); /* Arrow pointing down */
             filter: drop-shadow(0 2px 1px rgba(0,0,0,0.1));
        }
        .marker-popup .pin-icon { /* Separate element for pin */
            position: absolute;
            top: -25px; /* Position pin above text */
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            font-size: 20px; /* Control SVG size */
            color: var(--duo-red);
        }


        /* --- Location Pop-up --- */
        .location-popup-container {
            position: absolute;
            bottom: 20px; /* Closer to bottom */
            left: 50%;
            transform: translateX(-50%);
            width: 420px; /* Slightly wider */
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-streak {
            background-color: var(--duo-orange);
            color: var(--duo-text-light);
            padding: 8px 20px;
            border-radius: var(--border-radius-medium) var(--border-radius-medium) 0 0;
            font-weight: 800; /* Bolder */
            font-size: 14px;
            transform: translateY(10px); /* Overlap effect */
            z-index: 1;
            position: relative;
        }

        .location-popup {
            background-color: var(--duo-bg-light);
            border-radius: var(--border-radius-medium);
            box-shadow: var(--box-shadow-heavy);
            width: 100%;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--duo-border-gray);
            position: relative; /* For overlapping streak */
        }

        .popup-content {
            display: flex;
            align-items: center;
            padding: 25px 20px 15px 20px; /* More padding top */
            gap: 15px;
            position: relative;
        }

        .popup-icon-wrapper {
             width: 90px; /* Larger icon */
             height: 90px;
             align-self: center; /* Center vertically */
             flex-shrink: 0;
             display: flex;
             align-items: center;
             justify-content: center;
        }
        .popup-icon-wrapper svg {
            width: 100%;
            height: auto;
        }

        .popup-text { flex-grow: 1;}

        .popup-text p {
            font-size: 14px;
            color: var(--duo-gray-dark);
            margin-bottom: 2px;
            font-weight: 700; /* Bold */
        }
        .popup-text h2 {
            font-size: 28px; /* Larger */
            font-weight: 800;
            color: var(--duo-text-dark);
            margin-bottom: 4px;
        }
        .popup-text .location-native {
            font-size: 14px;
            color: var(--duo-gray-medium);
            font-weight: 700; /* Bold */
            margin-bottom: 10px;
        }
        .popup-text .xp-gain {
            font-size: 18px; /* Larger */
            font-weight: 800;
            color: var(--duo-yellow);
        }
        .popup-text .xp-gain .icon { /* Style the lightning bolt */
            display: inline-block;
            transform: translateY(3px);
            font-size: 20px; /* Larger */
            margin-right: 3px;
        }

        .sound-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--duo-blue);
            color: var(--duo-text-light);
            border: none;
            border-radius: var(--border-radius-small);
            width: 40px; /* Larger */
            height: 40px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s ease;
            box-shadow: inset 0 -2px 0 rgba(0,0,0,0.2); /* Inner bottom shadow */
        }
        .sound-btn:hover {
            background-color: var(--duo-blue-dark);
        }
        .sound-btn .icon { font-size: 20px; }

        .next-spot-btn {
            background-color: var(--duo-green);
            color: var(--duo-text-light);
            font-size: 16px;
            font-weight: 800;
            text-transform: uppercase; /* Uppercase text */
            text-align: center;
            padding: 18px 0; /* Taller */
            border: none;
            border-bottom-left-radius: var(--border-radius-medium);
            border-bottom-right-radius: var(--border-radius-medium);
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-top: 1px solid var(--duo-border-gray);
            margin-top: 10px;
            box-shadow: inset 0 -4px 0 var(--duo-green-dark); /* Inner bottom shadow */
        }
        .next-spot-btn:hover {
            background-color: #88d807; /* Slightly lighter green on hover */
        }
         .next-spot-btn:active {
             box-shadow: inset 0 -2px 0 var(--duo-green-dark);
             transform: translateY(2px); /* Pressed effect */
         }


        /* --- Map Controls --- */
        .map-controls {
            position: absolute;
            bottom: 20px;
            right: 295px; /* Positioned left of the sidebar */
            display: flex;
            flex-direction: column;
            gap: 8px; /* Reduced gap */
            z-index: 15;
        }

        .map-controls button {
            background-color: var(--duo-bg-light);
            border: 1px solid var(--duo-border-gray);
            color: var(--duo-gray-dark); /* Darker icon color */
            width: 45px; /* Larger */
            height: 45px;
            border-radius: var(--border-radius-medium); /* More rounded */
            box-shadow: var(--box-shadow);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s ease;
        }
        .map-controls button:hover {
            background-color: var(--duo-bg-offwhite);
        }
         .map-controls button .icon {
            font-size: 22px;
         }


        /* --- Right Sidebar --- */
        .sidebar-right {
            width: 280px;
            background-color: var(--duo-bg-offwhite); /* Offwhite BG */
            border-left: 1px solid var(--duo-border-gray);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
             flex-shrink: 0;
        }

        .panel {
            background-color: var(--duo-bg-light);
            border-radius: var(--border-radius-medium);
            padding: 15px;
            border: 1px solid var(--duo-border-gray);
            box-shadow: var(--box-shadow); /* Add shadow to panels */
        }

        .panel h3 {
            font-size: 18px; /* Larger title */
            font-weight: 800;
            color: var(--duo-text-dark);
            margin-bottom: 10px;
        }
        .panel p {
            font-size: 14px; /* Larger text */
            color: var(--duo-gray-dark);
            margin-bottom: 15px;
            line-height: 1.4;
            font-weight: 700; /* Bold */
        }

        /* Tourist Clash Specific */
        .clash-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }
        .clash-display .player {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .avatar-placeholder {
            width: 45px; /* Larger avatars */
            height: 45px;
            border-radius: 50%;
            background-color: var(--duo-gray-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            flex-shrink: 0;
            border: 2px solid white; /* White border */
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            overflow: hidden; /* Clip SVG */
        }
         .avatar-placeholder .icon {
             width: 100%; height: 100%;
         }

        /* Assign avatar IDs for specific SVGs */
        .avatar-placeholder.you { background-color: #4682B4; } /* Steel Blue */
        .avatar-placeholder.amy { background-color: #DA70D6; } /* Orchid */
        .avatar-placeholder.gary { background-color: #FF8C00; } /* Dark Orange */
        .avatar-placeholder.maria { background-color: #DB7093; } /* Pale Violet Red */
        .avatar-placeholder.angie { background-color: #CD853F; } /* Peru */
        .avatar-placeholder.michael { background-color: #20B2AA; } /* Light Sea Green */


        .clash-display .player span {
            font-size: 20px; /* Larger score */
            font-weight: 800;
            color: var(--duo-text-dark);
        }
        .clash-display .timer {
            background-color: var(--duo-purple);
            color: var(--duo-text-light);
            font-size: 12px;
            font-weight: 700;
            padding: 6px 12px; /* Larger timer */
            border-radius: 12px;
        }
        .tourist-clash .status {
            font-size: 14px;
            font-weight: 800; /* Bold */
            color: var(--duo-green);
            text-align: center;
            margin-bottom: 0;
        }

        /* Tourist Leaderboard Specific */
        .tourist-leaderboard ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 5px; /* Reduced gap */
        }
        .tourist-leaderboard li {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: var(--border-radius-medium); /* More rounded */
            transition: background-color 0.2s ease;
        }
        .tourist-leaderboard li.current-user {
            background-color: #e7f8d8; /* Light green highlight */
        }
        .tourist-leaderboard li .rank {
            font-size: 14px;
            font-weight: 700;
            color: var(--duo-gray-dark);
            width: 20px;
            text-align: center;
            margin-right: 10px;
            flex-shrink: 0;
        }
        .tourist-leaderboard li .avatar-placeholder {
             width: 40px; /* Leaderboard avatar size */
             height: 40px;
             margin-right: 10px;
             font-size: 14px;
        }

        .leader-info {
            flex-grow: 1;
            margin-right: 10px;
            overflow: hidden;
        }
        .leader-info span {
            display: block;
            font-size: 15px; /* Slightly larger */
            font-weight: 800; /* Bold name */
            color: var(--duo-text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .leader-info small {
            font-size: 13px; /* Slightly larger */
            color: var(--duo-gray-dark); /* Darker status text */
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 700; /* Bold status */
        }
        .score {
            font-size: 15px; /* Larger score */
            font-weight: 800; /* Bold */
            color: var(--duo-text-dark);
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }
        .score .icon {
            color: var(--duo-yellow);
            margin-right: 5px;
            font-size: 16px; /* Slightly larger icon */
        }
        .view-all {
            display: block;
            text-align: center;
            margin-top: 15px;
            color: var(--duo-blue);
            font-weight: 800; /* Bold */
            font-size: 14px;
            text-transform: uppercase; /* Uppercase */
            text-decoration: none;
        }
        .view-all:hover {
            text-decoration: underline;
        }

    </style>
</head>
<body>
    <!-- Inline SVG Definitions -->
    <svg width="0" height="0" style="position:absolute">
      <defs>
        <!-- === Basic Icons (Duolingo Style) === -->
        <svg id="icon-bookmark" viewBox="0 0 24 24"><path d="M17.8,2.2H6.2C4.7,2.2,3.5,3.4,3.5,4.9v16.6c0,0.8,0.9,1.3,1.6,0.8l6.9-4.9l6.9,4.9c0.7,0.5,1.6,0,1.6-0.8V4.9 C20.5,3.4,19.3,2.2,17.8,2.2z"></path></svg>
        <svg id="icon-redo" viewBox="0 0 24 24"><path d="M18.3,5.7C16.7,4.1,14.5,3,12,3C7.3,3,3.4,6.9,3.4,11.6s3.9,8.6,8.6,8.6c3.4,0,6.4-2,7.8-4.9h-2.4 c-1,2.1-3.2,3.5-5.4,3.5c-3.5,0-6.4-2.9-6.4-6.4s2.9-6.4,6.4-6.4c1.7,0,3.3,0.7,4.4,1.9l-2.7,2.7h6.8V3L18.3,5.7z"></path></svg>
        <svg id="icon-map-location-dot" viewBox="0 0 24 24"><path d="M12,1C7.6,1,4,4.6,4,9c0,5.5,7.1,13.4,7.3,13.7c0.3,0.4,1,0.4,1.3,0C12.9,22.4,20,14.5,20,9C20,4.6,16.4,1,12,1z M12,12.5 c-1.9,0-3.5-1.6-3.5-3.5S10.1,5.5,12,5.5s3.5,1.6,3.5,3.5S13.9,12.5,12,12.5z"></path></svg>
        <svg id="icon-search" viewBox="0 0 24 24"><path d="M16.3,15.1h-0.8l-0.3-0.3c1.1-1.3,1.8-3,1.8-4.8c0-4-3.2-7.2-7.2-7.2S2.7,5.9,2.7,10s3.2,7.2,7.2,7.2 c1.8,0,3.5-0.7,4.8-1.8l0.3,0.3v0.8l5.5,5.5l1.7-1.7L16.3,15.1z M10,15.2c-2.9,0-5.2-2.3-5.2-5.2s2.3-5.2,5.2-5.2 s5.2,2.3,5.2,5.2S12.9,15.2,10,15.2z"></path></svg>
        <svg id="icon-directions" viewBox="0 0 24 24"><path d="M21.7,11.3l-9-9c-0.4-0.4-1-0.4-1.4,0l-9,9c-0.4,0.4-0.4,1,0,1.4l9,9c0.4,0.4,1,0.4,1.4,0l9-9 C22.1,12.3,22.1,11.7,21.7,11.3z M13.5,14.8V12h-3v3.3H9V11c0-0.6,0.4-1,1-1h4V7.2l3.8,3.8L13.5,14.8z"></path></svg>
        <svg id="icon-map-pin" viewBox="0 0 24 24"><path d="M12,2C8.1,2,5,5.1,5,9c0,5.2,7,13,7,13s7-7.8,7-13C19,5.1,15.9,2,12,2z M12,11.5c-1.4,0-2.5-1.1-2.5-2.5 s1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5S13.4,11.5,12,11.5z"></path></svg>
        <svg id="icon-zap" viewBox="0 0 24 24"><path d="M6.9,21.7l2.7-6.4H6L17.1,2.3l-2.7,6.4h3.6L6.9,21.7z"></path></svg>
        <svg id="icon-volume-up" viewBox="0 0 24 24"><path d="M11.7,3.3L7,8H3c-0.6,0-1,0.4-1,1v6c0,0.6,0.4,1,1,1h4l4.7,4.7c0.6,0.6,1.6,0.2,1.6-0.7V4C13.3,3.1,12.3,2.7,11.7,3.3z M18.6,6.4c-0.4-0.4-1-0.4-1.4,0c-0.4,0.4-0.4,1,0,1.4c1.6,1.6,2.5,3.8,2.5,6.1s-0.9,4.5-2.5,6.1c-0.4,0.4-0.4,1,0,1.4 c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c2-2,3.1-4.7,3.1-7.5S20.6,8.4,18.6,6.4z M16.1,8.9c-0.4-0.4-1-0.4-1.4,0 c-0.4,0.4-0.4,1,0,1.4c0.8,0.8,1.2,1.8,1.2,2.9s-0.4,2.1-1.2,2.9c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 c1.2-1.2,1.8-2.7,1.8-4.2S17.3,10.1,16.1,8.9z"></path></svg>
        <svg id="icon-crosshairs" viewBox="0 0 24 24"><path d="M12,7.1c-2.7,0-4.9,2.2-4.9,4.9s2.2,4.9,4.9,4.9s4.9-2.2,4.9-4.9S14.7,7.1,12,7.1z M12,15.1c-1.7,0-3.1-1.4-3.1-3.1 s1.4-3.1,3.1-3.1s3.1,1.4,3.1,3.1S13.7,15.1,12,15.1z"></path><path d="M12,1C5.9,1,1,5.9,1,12s4.9,11,11,11s11-4.9,11-11S18.1,1,12,1z M12,20.5c-4.7,0-8.5-3.8-8.5-8.5S7.3,3.5,12,3.5 s8.5,3.8,8.5,8.5S16.7,20.5,12,20.5z"></path><path d="M12,2V3.5 M12,20.5V22 M22,12H20.5 M3.5,12H2"></path></svg> <!-- Simplified paths -->
        <svg id="icon-plus" viewBox="0 0 24 24"><path d="M19 11h-6V5c0-.6-.4-1-1-1s-1 .4-1 1v6H5c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1v-6h6c.6 0 1-.4 1-1s-.4-1-1-1z"></path></svg>
        <svg id="icon-minus" viewBox="0 0 24 24"><path d="M19 11H5c-.6 0-1 .4-1 1s.4 1 1 1h14c.6 0 1-.4 1-1s-.4-1-1-1z"></path></svg>

        <!-- === City Icons (Simplified) === -->
        <svg id="city-paris" viewBox="0 0 48 48">
            <rect width="48" height="48" rx="16" fill="#87CEEB"/>
            <path d="M24 10 L 29 40 L 19 40 Z M 20 25 H 28 M 21 32 H 27" fill="#FFFFFF" stroke="#6495ED" stroke-width="1"/>
        </svg>
        <svg id="city-tokyo" viewBox="0 0 48 48">
            <rect width="48" height="48" rx="16" fill="#FFB6C1"/>
            <path d="M16 40 V 20 L 24 10 L 32 20 V 40 H 16 Z M 12 40 H 36" fill="#FFFFFF" stroke="#FF69B4" stroke-width="1"/>
             <rect x="20" y="25" width="8" height="15" fill="#FF69B4"/>
        </svg>
        <svg id="city-london" viewBox="0 0 48 48">
             <rect width="48" height="48" rx="16" fill="#90EE90"/>
             <rect x="14" y="18" width="20" height="20" fill="#FFFFFF" stroke="#3CB371" stroke-width="1"/>
             <rect x="20" y="10" width="8" height="30" fill="#FFFFFF" stroke="#3CB371" stroke-width="1"/>
             <circle cx="24" cy="28" r="4" fill="#3CB371"/>
        </svg>
         <svg id="city-beijing" viewBox="0 0 48 48">
            <rect width="48" height="48" rx="16" fill="#FFA07A"/>
            <path d="M10 38 H 38 V 28 Q 38 24 34 24 H 14 Q 10 24 10 28 Z" fill="#DC143C" stroke="#8B0000" stroke-width="1"/>
            <path d="M14 24 V 15 L 24 10 L 34 15 V 24" fill="#FFD700" stroke="#DAA520" stroke-width="1"/>
             <rect x="22" y="28" width="4" height="10" fill="#8B0000"/>
        </svg>

         <!-- === Avatar Placeholders (Simple Face) === -->
         <svg id="avatar-generic" viewBox="0 0 40 40">
            <circle cx="20" cy="20" r="20" fill="currentColor"/> <!-- Background color set by CSS -->
            <circle cx="15" cy="16" r="3" fill="white"/>
            <circle cx="25" cy="16" r="3" fill="white"/>
            <path d="M 12 26 Q 20 32 28 26" stroke="white" stroke-width="2" fill="none"/>
         </svg>
         <svg id="avatar-bea" viewBox="0 0 40 40"> <!-- Specific example -->
            <circle cx="20" cy="20" r="20" fill="#4682B4"/>
            <circle cx="14" cy="16" r="2.5" fill="white"/>
            <circle cx="26" cy="16" r="2.5" fill="white"/>
             <rect x="12" y="12" width="16" height="2" rx="1" fill="white" transform="rotate(-10 20 20)"/> <!-- Eyebrow -->
            <path d="M 14 26 C 16 29, 24 29, 26 26" stroke="white" stroke-width="1.5" fill="none"/>
         </svg>
          <!-- Add other avatar SVGs similarly -->

         <!-- === Landmark SVGs (Simplified) === -->
          <svg id="landmark-eiffel" viewBox="0 0 60 120">
             <path fill="#BFBFBF" stroke="#8C8C8C" stroke-width="0.5" d=" M 30 0 L 45 120 L 15 120 Z M 18 120 Q 10 100 25 100 H 35 Q 50 100 42 120 Z M 20 70 H 40 V 80 H 20 Z M 25 40 H 35 V 48 H 25 Z "/>
          </svg>
          <svg id="landmark-arc-de-triomphe" viewBox="0 0 50 50">
            <path fill="#F5EAAA" stroke="#D4C080" stroke-width="0.5" d="M5 48 H 45 V 15 H 5 Z M 15 48 V 25 Q 25 10 35 25 V 48 M 0 15 H 50 V 10 H 0 Z M 20 5 L 30 5 L 28 10 L 22 10 Z" />
          </svg>
          <svg id="landmark-louvre-pyramid" viewBox="0 0 50 35">
             <polygon points="25,5 5,35 45,35" fill="#BDE0FE" stroke="#87CEFA" stroke-width="1"/>
             <line x1="25" y1="5" x2="5" y2="35" stroke="#A0C4E0" stroke-width="0.5"/>
             <line x1="25" y1="5" x2="45" y2="35" stroke="#A0C4E0" stroke-width="0.5"/>
             <line x1="25" y1="5" x2="25" y2="35" stroke="#A0C4E0" stroke-width="0.5"/>
              <line x1="15" y1="35" x2="35" y2="35" stroke="#A0C4E0" stroke-width="0.5"/>
         </svg>
          <svg id="landmark-notre-dame" viewBox="0 0 60 60">
             <path fill="#D8C8B8" stroke="#A09080" stroke-width="0.5" d=" M 5 58 H 55 V 25 L 30 10 L 5 25 Z M 10 58 V 30 H 20 V 58 Z M 40 58 V 30 H 50 V 58 Z M 25 58 V 40 H 35 V 58 Z "/>
             <circle cx="30" cy="35" r="6" fill="#A09080"/>
          </svg>
           <svg id="landmark-sainte-chapelle" viewBox="0 0 40 60">
            <path fill="#C8B0D8" stroke="#9370DB" stroke-width="0.5" d="M 5 58 H 35 V 15 L 20 5 L 5 15 Z M 10 55 V 20 H 30 V 55 Z M 12 50 H 18 V 25 H 12 Z M 22 50 H 28 V 25 H 22 Z" />
          </svg>
           <svg id="landmark-pantheon" viewBox="0 0 50 55">
             <path fill="#F0E0B0" stroke="#D4A060" stroke-width="0.5" d=" M 5 53 H 45 V 30 H 5 Z M 10 28 V 15 H 40 V 28 M 8 50 V 30 M 16 50 V 30 M 24 50 V 30 M 32 50 V 30 M 40 50 V 30 M 42 50 V 30 "/>
             <path fill="#80A0C0" stroke="#507090" stroke-width="0.5" d=" M 15 15 Q 25 0 35 15 Z "/>
           </svg>
            <svg id="landmark-hotel-invalides" viewBox="0 0 55 50">
                <path fill="#FFD700" stroke="#DAA520" stroke-width="0.5" d="M 5 48 H 50 V 25 H 5 Z M 10 25 L 27.5 10 L 45 25 Z M 20 25 Q 27.5 15 35 25"/>
                <path fill="#B8860B" stroke="#8B4513" stroke-width="0.5" d="M 20 15 A 7.5 7.5 0 0 1 35 15 Z"/>
           </svg>
            <svg id="landmark-place-concorde" viewBox="0 0 15 60">
               <polygon points="7.5,0 12,55 3,55" fill="#F8E0C0" stroke="#D8B080" stroke-width="0.5"/>
                <rect x="0" y="55" width="15" height="5" fill="#C0C0C0" stroke="#808080" stroke-width="0.5"/>
           </svg>
            <svg id="landmark-palais-garnier" viewBox="0 0 50 45">
                <path fill="#FFE080" stroke="#FFC040" stroke-width="0.5" d="M 5 43 H 45 V 20 H 5 Z M 5 20 L 25 10 L 45 20 M 10 40 V 20 M 40 40 V 20 M 15 18 H 35 V 14 H 15 Z" />
                 <path fill="#80B080" stroke="#508050" stroke-width="0.5" d=" M 15 14 Q 25 5 35 14 Z "/>
           </svg>

      </defs>
    </svg>


    <div class="duo-map-container">

        <!-- Left Sidebar -->
        <aside class="sidebar-left">
             <div class="sidebar-icon">
                 <div class="icon-wrapper">
                     <svg class="icon"><use xlink:href="#icon-bookmark"/></svg>
                 </div>
            </div>
            <div class="sidebar-icon">
                 <div class="icon-wrapper">
                    <svg class="icon"><use xlink:href="#icon-redo"/></svg>
                 </div>
            </div>
            <div class="sidebar-divider"></div>

            <div class="sidebar-icon city active">
                 <div class="icon-wrapper">
                     <svg class="icon"><use xlink:href="#city-paris"/></svg>
                 </div>
                <span>Paris</span>
            </div>
            <div class="sidebar-icon city">
                 <div class="icon-wrapper">
                      <svg class="icon"><use xlink:href="#city-tokyo"/></svg>
                 </div>
                <span>Tokyo</span>
            </div>
            <div class="sidebar-icon city">
                 <div class="icon-wrapper">
                      <svg class="icon"><use xlink:href="#city-london"/></svg>
                 </div>
                <span>London</span>
            </div>
            <div class="sidebar-icon city">
                 <div class="icon-wrapper">
                      <svg class="icon"><use xlink:href="#city-beijing"/></svg>
                 </div>
                <span>Beijing</span>
            </div>

            <div class="sidebar-icon more-tours">
                 <div class="icon-wrapper">
                     <svg class="icon"><use xlink:href="#icon-map-location-dot"/></svg>
                 </div>
                <span>More tours</span>
            </div>
            <div class="sidebar-icon character">
                 <div class="character-avatar">
                     <!-- Use a specific avatar if defined, otherwise generic -->
                     <svg class="icon"><use xlink:href="#avatar-bea"/></svg>
                 </div>
                 <span class="char-badge">24</span>
            </div>
        </aside>

        <!-- Main Map Area -->
        <main class="map-area">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="search-bar">
                     <svg class="icon"><use xlink:href="#icon-search"/></svg>
                    <input type="text" placeholder="Search Duo Map">
                     <svg class="icon icon-directions"><use xlink:href="#icon-directions"/></svg>
                </div>
                <div class="tour-progress">
                    <div class="flag">🇫🇷</div>
                    <div class="progress-text">
                        <h2>Tourism in Paris</h2>
                        <div class="progress-bar-container">
                            <div class="progress-bar"></div>
                        </div>
                        <span>
                            <svg class="icon icon-map-pin"><use xlink:href="#icon-map-pin"/></svg>
                             15/20 spots left <!-- Added space -->
                        </span>
                    </div>
                </div>
            </header>

            <!-- Map Content -->
            <div class="map-content">
                <!-- SVG Background Elements -->
                 <svg id="map-background-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                    <!-- Darker Green Base -->
                    <rect width="100%" height="100%" fill="var(--map-bg-green-dark)"/>
                    <!-- Lighter Green Land Shape (Simplified) -->
                    <path fill="var(--map-bg-green-light)" d="M0 0 H800 V600 H0 Z M 100 50 C 200 80, 150 200, 250 250 C 350 300, 300 450, 400 500 C 500 550, 600 500, 700 450 C 800 400, 750 250, 650 150 C 550 50, 450 80, 350 50 C 250 20, 150 30, 100 50 Z"/>
                    <!-- River Path (Simplified Curve) -->
                    <path d="M 50 600 Q 200 300 400 300 T 750 0" stroke="var(--map-river-blue)" stroke-width="35" fill="none" />
                     <path d="M 750 600 Q 600 400 500 350 T 300 300 T 150 400 T 50 550" stroke="var(--map-river-blue)" stroke-width="25" fill="none" />
                    <!-- Roads (Simplified Lines) -->
                    <path d="M 0 150 C 200 180, 400 100, 550 200 T 800 250" stroke="var(--map-road-light)" stroke-width="15" fill="none"/>
                     <path d="M 150 0 C 180 200, 250 400, 350 350 T 450 500 T 600 600" stroke="var(--map-road-light)" stroke-width="12" fill="none"/>
                     <path d="M 700 0 C 650 150, 600 300, 500 250 T 400 450 T 500 600" stroke="var(--map-road-light)" stroke-width="18" fill="none"/>
                     <!-- Dashed Route -->
                     <path d="M 150 450 C 250 400, 300 350, 400 380 C 500 410, 550 350, 650 400 T 700 300"
                           stroke="var(--map-route-orange)" stroke-width="8" stroke-dasharray="15 8" fill="none"
                           stroke-linecap="round" />
                 </svg>

                 <!-- Landmarks (Using new SVGs) -->
                 <div class="landmark arc-de-triomphe">
                     <div class="landmark-icon-wrapper">
                         <svg><use xlink:href="#landmark-arc-de-triomphe"/></svg>
                     </div>
                     <span>Arc De Triomphe</span>
                 </div>
                 <div class="landmark place-concorde">
                     <div class="landmark-icon-wrapper">
                         <svg><use xlink:href="#landmark-place-concorde"/></svg>
                     </div>
                     <span>Place de la Concorde</span>
                 </div>
                 <div class="landmark palais-garnier">
                     <div class="landmark-icon-wrapper">
                         <svg><use xlink:href="#landmark-palais-garnier"/></svg>
                     </div>
                     <span>Palais Garnier</span>
                 </div>
                  <div class="landmark hotel-invalides">
                     <div class="landmark-icon-wrapper">
                          <svg><use xlink:href="#landmark-hotel-invalides"/></svg>
                     </div>
                     <span>Hôtel des Invalides</span>
                 </div>
                 <div class="landmark pantheon">
                     <div class="landmark-icon-wrapper">
                          <svg><use xlink:href="#landmark-pantheon"/></svg>
                     </div>
                     <span>Panthéon</span>
                 </div>
                 <div class="landmark sainte-chapelle">
                     <div class="landmark-icon-wrapper">
                         <svg><use xlink:href="#landmark-sainte-chapelle"/></svg>
                     </div>
                     <span>Sainte-Chapelle</span>
                 </div>
                 <div class="landmark notre-dame">
                     <div class="landmark-icon-wrapper">
                         <svg><use xlink:href="#landmark-notre-dame"/></svg>
                     </div>
                     <span>Cathédrale Notre-Dame</span>
                 </div>
                 <div class="landmark louvre">
                      <div class="landmark-icon-wrapper">
                          <svg><use xlink:href="#landmark-louvre-pyramid"/></svg>
                      </div>
                     <span>Musée du Louvre</span>
                 </div>


                 <!-- "You are here" marker -->
                 <div class="marker you-are-here">
                     <div class="marker-popup">
                         <svg class="pin-icon"><use xlink:href="#icon-map-pin"/></svg>
                         You are here
                     </div>
                     <div class="marker-icon-wrapper">
                         <svg><use xlink:href="#landmark-eiffel"/></svg>
                     </div>
                     <span>Tour Eiffel</span>
                 </div>


                 <!-- Pop-up Card -->
                <div class="location-popup-container">
                     <div class="popup-streak">
                        💧 3 places in a day streak!
                     </div>
                     <div class="location-popup">
                         <div class="popup-content">
                             <div class="popup-icon-wrapper">
                                 <svg><use xlink:href="#landmark-eiffel"/></svg>
                             </div>
                             <div class="popup-text">
                                 <p>You visited the</p>
                                 <h2>Eiffel Tower</h2>
                                 <p class="location-native">🇫🇷 Tour Eiffel</p>
                                 <p class="xp-gain">
                                     <svg class="icon"><use xlink:href="#icon-zap"/></svg>
                                     +30 XP
                                 </p>
                             </div>
                             <button class="sound-btn">
                                  <svg class="icon"><use xlink:href="#icon-volume-up"/></svg>
                             </button>
                         </div>
                         <button class="next-spot-btn">TO NEXT SPOT</button>
                    </div>
                 </div>
            </div> <!-- End Map Content -->

             <!-- Map Controls -->
            <div class="map-controls">
                <button> <svg class="icon"><use xlink:href="#icon-crosshairs"/></svg> </button>
                <button> <svg class="icon icon-plus"><use xlink:href="#icon-plus"/></svg> </button>
                <button> <svg class="icon icon-minus"><use xlink:href="#icon-minus"/></svg> </button>
            </div>

        </main> <!-- End Map Area -->

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="panel tourist-clash">
                <h3>Tourist Clash</h3>
                <p>Visit all the spots before Amy</p>
                <div class="clash-display">
                    <div class="player you">
                        <div class="avatar-placeholder you">
                            <svg class="icon"><use xlink:href="#avatar-bea"/></svg>
                        </div>
                        <span>15</span>
                    </div>
                    <div class="timer">12h</div>
                    <div class="player opponent">
                        <span>10</span>
                         <div class="avatar-placeholder amy">
                              <svg class="icon"><use xlink:href="#avatar-generic"/></svg> <!-- Use generic or define #avatar-amy -->
                         </div>
                    </div>
                </div>
                <p class="status">You are taking the lead!</p>
            </div>

            <div class="panel tourist-leaderboard">
                <h3>Tourist Leaderboard</h3>
                <ul>
                    <li>
                        <span class="rank">1</span>
                        <div class="avatar-placeholder gary">
                             <svg class="icon"><use xlink:href="#avatar-generic"/></svg>
                        </div>
                        <div class="leader-info">
                            <span>Gary</span>
                            <small>in Musée du Louvre</small>
                        </div>
                        <span class="score">
                             <svg class="icon"><use xlink:href="#icon-map-pin"/></svg> 19
                         </span>
                    </li>
                    <li>
                        <span class="rank">2</span>
                        <div class="avatar-placeholder maria">
                            <svg class="icon"><use xlink:href="#avatar-generic"/></svg>
                        </div>
                        <div class="leader-info">
                            <span>마리아 카노</span>
                            <small>500m to Arc de Trio...</small>
                        </div>
                         <span class="score">
                             <svg class="icon"><use xlink:href="#icon-map-pin"/></svg> 18
                         </span>
                    </li>
                     <li>
                        <span class="rank">3</span>
                        <div class="avatar-placeholder angie">
                            <svg class="icon"><use xlink:href="#avatar-generic"/></svg>
                        </div>
                        <div class="leader-info">
                            <span>Angie</span>
                            <small>in Pantheon</small>
                        </div>
                         <span class="score">
                             <svg class="icon"><use xlink:href="#icon-map-pin"/></svg> 17
                         </span>
                    </li>
                     <li>
                        <span class="rank">4</span>
                         <div class="avatar-placeholder michael">
                             <svg class="icon"><use xlink:href="#avatar-generic"/></svg>
                         </div>
                        <div class="leader-info">
                            <span>Michael</span>
                            <small>234m to Sainte-Cha...</small>
                        </div>
                         <span class="score">
                             <svg class="icon"><use xlink:href="#icon-map-pin"/></svg> 16
                         </span>
                    </li>
                    <li class="current-user">
                        <span class="rank">5</span>
                         <div class="avatar-placeholder you">
                             <svg class="icon"><use xlink:href="#avatar-bea"/></svg>
                         </div>
                        <div class="leader-info">
                            <span>You</span>
                            <small>in Eiffel Tower</small>
                        </div>
                         <span class="score">
                             <svg class="icon"><use xlink:href="#icon-map-pin"/></svg> 15
                         </span>
                    </li>
                </ul>
                <a href="#" class="view-all">View all tourists</a>
            </div>
        </aside>

    </div> <!-- End Duo Map Container -->

</body>
</html>
